<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libwebsockets: lws_protocols Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="libwebsockets.org-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libwebsockets
   </div>
   <div id="projectbrief">Lightweight C library for HTML5 websockets</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">lws_protocols Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="libwebsockets_8h_source.html">libwebsockets.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a0e63edb457a613c3fa4271e0a8f19624"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlws__protocols.html#a0e63edb457a613c3fa4271e0a8f19624">name</a></td></tr>
<tr class="separator:a0e63edb457a613c3fa4271e0a8f19624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acabf94c1a9bfe7be0387fbb0e0c56b2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libwebsockets_8h.html#ad4fcb82e68d60ffacca61a3f783a0a2f">lws_callback_function</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlws__protocols.html#acabf94c1a9bfe7be0387fbb0e0c56b2d">callback</a></td></tr>
<tr class="separator:acabf94c1a9bfe7be0387fbb0e0c56b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bbd85f591ffb4259711cb5acbb05bea"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlws__protocols.html#a9bbd85f591ffb4259711cb5acbb05bea">per_session_data_size</a></td></tr>
<tr class="separator:a9bbd85f591ffb4259711cb5acbb05bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1d4996d81b2f5e125bcec981e461c5"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlws__protocols.html#a0d1d4996d81b2f5e125bcec981e461c5">rx_buffer_size</a></td></tr>
<tr class="separator:a0d1d4996d81b2f5e125bcec981e461c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b632018590c2b1bbe43fbab6d5e6fac"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlws__protocols.html#a6b632018590c2b1bbe43fbab6d5e6fac">id</a></td></tr>
<tr class="separator:a6b632018590c2b1bbe43fbab6d5e6fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbd903ad076736ae934a54cae36580e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3cbd903ad076736ae934a54cae36580e"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>user</b></td></tr>
<tr class="separator:a3cbd903ad076736ae934a54cae36580e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>struct <a class="el" href="structlws__protocols.html">lws_protocols</a> - List of protocols and handlers server supports.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">callback</td><td></td></tr>
    <tr><td class="paramname">per_session_data_size</td><td></td></tr>
    <tr><td class="paramname">rx_buffer_size</td><td>if you want atomic frames delivered to the callback, you should set this to the size of the biggest legal frame that you support. If the frame size is exceeded, there is no error, but the buffer will spill to the user callback when full, which you can detect by using <a class="el" href="libwebsockets_8h.html#a72fe65e83b8bb03f904a1a256c673536">lws_remaining_packet_payload()</a>. Notice that you just talk about frame size here, the LWS_PRE and post-padding are automatically also allocated on top. </td></tr>
    <tr><td class="paramname">id</td><td></td></tr>
    <tr><td class="paramname">user</td><td>User provided context data at the protocol level. Accessible via lws_get_protocol(wsi)-&gt;user This should not be confused with wsi-&gt;user, it is not the same. The library completely ignores any value in here.</td></tr>
  </table>
  </dd>
</dl>
<p>This structure represents one protocol supported by the server. An array of these structures is passed to lws_create_server() allows as many protocols as you like to be handled by one server.</p>
<p>The first protocol given has its callback used for user callbacks when there is no agreed protocol name, that's true during HTTP part of the connection and true if the client did not send a Protocol: header. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="acabf94c1a9bfe7be0387fbb0e0c56b2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libwebsockets_8h.html#ad4fcb82e68d60ffacca61a3f783a0a2f">lws_callback_function</a>* lws_protocols::callback</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The service callback used for this protocol. It allows the service action for an entire protocol to be encapsulated in the protocol-specific callback </p>

</div>
</div>
<a class="anchor" id="a6b632018590c2b1bbe43fbab6d5e6fac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lws_protocols::id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ignored by lws, but useful to contain user information bound to the selected protocol. For example if this protocol was called "myprotocol-v2", you might set id to 2, and the user code that acts differently according to the version can do so by switch (wsi-&gt;protocol-&gt;id), user code might use some bits as capability flags based on selected protocol version, etc. </p>

</div>
</div>
<a class="anchor" id="a0e63edb457a613c3fa4271e0a8f19624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* lws_protocols::name</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Protocol name that must match the one given in the client Javascript new WebSocket(url, 'protocol') name. </p>

</div>
</div>
<a class="anchor" id="a9bbd85f591ffb4259711cb5acbb05bea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t lws_protocols::per_session_data_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each new connection using this protocol gets this much memory allocated on connection establishment and freed on connection takedown. A pointer to this per-connection allocation is passed into the callback in the 'user' parameter </p>

</div>
</div>
<a class="anchor" id="a0d1d4996d81b2f5e125bcec981e461c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t lws_protocols::rx_buffer_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lws allocates this much space for rx data and informs callback when something came. Due to rx flow control, the callback may not be able to consume it all without having to return to the event loop. That is supported in lws.</p>
<p>This also controls how much may be sent at once at the moment, although this is likely to change. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lib/<a class="el" href="libwebsockets_8h_source.html">libwebsockets.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
